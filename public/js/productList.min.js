$(() => {
  let e,
    t = (function(e) {
      var t = e.split('?')[1]
      if (!t) return !1
      var a = t.split('&')
      if (!a) return !1
      for (var c = {}, i = 0; i < a.length; i++) {
        var l = a[i].split('=')
        c[l[0]] = l[1]
      }
      return c
    })(window.location.href)
  function a(t = 1, a = 1) {
    $.ajax({
      url: 'http://127.0.0.1:3000/api/getproductlist',
      data: { categoryid: t, pageid: a },
      dataType: 'json',
      success: t => {
        e = t.result.count
        let c = t.result.list,
          i = ''
        c.forEach(e => {
          i += `\n                    <li >\n                    <a href="/bijia.html?productId=${
            e.productId
          }&amp;category=${
            e.categoryId
          }&amp;" class="">\n                    <div  class="pic">\n                        <img src="${
            e.productImg.src
          }" alt="${
            e.productImg.alt
          }"width="100" height="100">\n                    </div>\n                    <div class="info">\n                        <div class="tit">${
            e.productName
          }</div>\n                        <div  class="price"><em >${
            e.productPrice
          }</em> <span class="star"><em  class="star5"></em></span></div>\n                        <div  class="other"><em >${
            e.productQuote
          }</em> <em>${
            e.productCom
          }</em></div>\n                    </div>\n                </a>\n                </li>`
        }),
          $('#recommen-product ul').html(i)
        let l = ''
        for (let t = 0; t < e / 10; t++)
          l += `\n                        <option value="${t + 1}">第${t +
            1}页</option>\n                    `
        $('#selectPage').html(l),
          (a = (a += '').replace('#', '')),
          setTimeout(() => $('#selectPage').val(a))
      }
    })
  }
  a(t.categoryid, t.pageid),
    $('#pageRemove').on('click', function() {
      let c = $('#selectPage').val()
      return (
        !(++c > e / 10) && (a(t.categoryid, c), $('#selectPage').val(c), !1)
      )
    }),
    $('#pageAdd').on('click', function() {
      let e = $('#selectPage').val()
      return !(--e <= 0) && (a(t.categoryid, e), $('#selectPage').val(e), !1)
    }),
    $('#selectPage').on('change', function() {
      a(t.categoryid, $(this).val())
    })
})
